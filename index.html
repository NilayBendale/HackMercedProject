<!-- <!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>functional test page</title>
	</head>

	<body>
		<h1>"A Short Title"</h1>
		<script src="src/utils.js"></script>
		<script src="src/wordSubstitution.js"></script>
	</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title><title>GhostWrite</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

        /* Background Styling */
        body {
            background-color: #0d0d0d;
            color: #00ffcc;
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            padding: 20px;
        }

        h1 {
            font-size: 2rem;
            text-transform: uppercase;
            text-shadow: 0 0 5px #00ffcc, 0 0 10px #00ffcc;
        }

        /* Textbox & Input Styles */
        textarea, input {
            background-color: #121212;
            color: #00ffcc;
            border: 2px solid #00ffcc;
            padding: 10px;
            width: 60%;
            font-size: 1rem;
            margin: 10px 0;
            border-radius: 10px;
            box-shadow: 0px 0px 10px #00ffcc;
            transition: all 0.3s ease-in-out;
        }

        textarea:focus, input:focus {
            outline: none;
            box-shadow: 0px 0px 20px #00ffcc;
        }

        /* Buttons */
        button {
            background-color: transparent;
            color: #00ffcc;
            border: 2px solid #00ffcc;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            margin: 10px;
            border-radius: 10px;
            text-transform: uppercase;
            transition: all 0.3s ease-in-out;
            box-shadow: 0px 0px 10px #00ffcc;
        }

        button:hover {
            background-color: #00ffcc;
            color: #0d0d0d;
            box-shadow: 0px 0px 20px #00ffcc;
        }

        /* Display Boxes */
        #encodedOutput, #decodedEncodedText, #hiddenOutput {
            background-color: #1a1a1a;
            color: #00ffcc;
            border: 2px solid #00ffcc;
            padding: 10px;
            width: 60%;
            margin: 10px auto;
            font-size: 1rem;
            border-radius: 10px;
            box-shadow: 0px 0px 10px #00ffcc;
            text-align: center;
            white-space: pre-wrap;
            display: none; /* Initially hidden */
        }

        /* Circuit Board Background */
        body::before {
            content: "";
            background: url('https://www.transparenttextures.com/patterns/circuit-board.png');
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.05;
            z-index: -1;
        }
    </style>
</head>
<body>
    <h1>GhostWrite</h1>

    <label>Original Text:</label>
    <textarea id="inputText" rows="4" cols="50" placeholder="Enter text here..."></textarea>
    <br><br>

    <label>Data to Encode:</label>
    <input type="text" id="encodeData" placeholder="Enter hidden message">
    <br><br>

    <button onclick="encodeText()">Encode</button>
    <button onclick="decodeText()">Decode</button>

    <p><strong>Encoded Text (With Hidden Data Embedded):</strong></p>
    <p id="encodedOutput"></p> 

    <p><strong>Decoded Hidden Data:</strong></p>
    <p id="outputText"></p>

    <p><strong>Text With Encoded Data (After Decoding):</strong></p>
    <p id="decodedEncodedText"></p>

    <button onclick="toggleHiddenData()">Show Hidden Unicode Data</button>
    <p id="hiddenOutput"></p>

    <script src="src/utils.js"></script>
    <script src="src/wordSubstitution.js"></script>
    <script src="src/trackerData.js"></script>
    <script src="src/varSelectorUtils.js"></script>

    <script>
        function encodeText() {
            const inputText = document.getElementById("inputText").value;
            const hiddenData = document.getElementById("encodeData").value;

            if (typeof appendData === "function") {
                const hiddenDataArray = [...hiddenData].map(char => char.charCodeAt(0));
                const encodedText = appendData(inputText, hiddenDataArray);
                
                document.getElementById("encodedOutput").innerText = encodedText;
                document.getElementById("encodedOutput").style.display = "block"; 

                const hiddenChars = [...encodedText]
                    .filter(char => char.codePointAt(0) >= 0xFE00)
                    .map(char => `U+${char.codePointAt(0).toString(16).toUpperCase()}`)
                    .join(" ");

                document.getElementById("hiddenOutput").innerText = hiddenChars || "No hidden characters detected.";
                document.getElementById("hiddenOutput").style.display = "none";
            } else {
                console.error("Encoding function not found.");
                document.getElementById("outputText").innerText = "Encoding function not available.";
            }
        }

        function decodeText() {
            const encodedText = document.getElementById("encodedOutput").innerText;

            if (typeof dataFromRawText === "function") {
                const decodedDataArray = dataFromRawText(encodedText);
                const decodedData = decodedDataArray.map(code => String.fromCharCode(...code)).join("");

                document.getElementById("outputText").innerText = decodedData || "No hidden data found.";
                document.getElementById("decodedEncodedText").innerText = encodedText;
                document.getElementById("decodedEncodedText").style.display = "block"; 
            } else {
                console.error("Decoding function not found.");
                document.getElementById("outputText").innerText = "Decoding function not available.";
            }
        }

        function toggleHiddenData() {
            const hiddenOutput = document.getElementById("hiddenOutput");
            hiddenOutput.style.display = (hiddenOutput.style.display === "none") ? "block" : "none";
        }
    </script>
</body>
</html>
